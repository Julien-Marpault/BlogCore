function ValidForm(n){let t,i=n.querySelectorAll("input,textarea,select");for(let n=0;n<i.length;n++){let r=i[n],u=r.tagName;r.getAttribute("data-val")==="true"&&(u==="INPUT"||u==="TEXTAREA"?r.addEventListener("keyup",function(){ValidInput(r,u)}):u==="SELECT"&&r.addEventListener("change",function(){ValidInput(r,u)}),ValidInput(r,u)||(t=!1))}t!==!1&&n.submit()}function ValidInput(n,t){let i=n.getAttribute("data-val-required");if(i!==undefined&&i!==null){if(t==="INPUT"||t==="TEXTAREA")return n.value.length===0?(n.classList.add("validation-error"),!1):(n.classList.remove("validation-error"),!0);if(t==="SELECT")return n.value===""?(n.classList.add("validation-error"),!1):(n.classList.remove("validation-error"),!0)}}function DragElement(n){draggedElement=n.currentTarget;clonedElement=draggedElement.cloneNode(!0)}function DragOver(n){n.preventDefault();let t=n.currentTarget,i=t.getBoundingClientRect();n.clientY-i.top>t.clientHeight/2?(console.log("Bas"),t.parentElement.insertBefore(clonedElement,t.nextSibling),draggedElement.style.display="none"):(console.log("Haut"),t.parentElement.insertBefore(clonedElement,t),draggedElement.style.display="none")}function DragLeave(n){n.preventDefault()}function DragEnd(n){n.preventDefault();draggedElement.style.opacity=""}function Drop(n){n.preventDefault()}function AutoComplete(n){let t=new XMLHttpRequest;t.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE)if(this.status===200){autoCompleteTab.innerHTML=null;let n=JSON.parse(this.responseText);if(n.length>0){let t=document.createElement("select");for(let t=0;t<n.length;t++){let i=document.createElement("div");i.innerText=n[t];autoCompleteTab.appendChild(i);i.addEventListener("click",function(){SelectTag(i.innerText)})}autoCompleteTab.style.display="block"}}else console.log("Status de la rÃ©ponse: %d (%s)",this.status,this.statusText)};t.open("GET","/completetags/"+n);t.send()}function SelectTag(n){tagSelector.value=null;let i=document.createElement("input");i.setAttribute("type","hidden");i.setAttribute("name","Tags["+tagCount+"]");i.value=n;autoCompleteTab.parentElement.appendChild(i);autoCompleteTab.style.display="none";autoCompleteTab.innerHTML=null;let r=document.createElement("span");r.innerText=n;let t=document.createElement("span");t.classList.add("close");t.innerHTML=closeString;t.setAttribute("data-tag",n);r.appendChild(t);t.addEventListener("click",function(n){RemoveTag(n)});autoCompleteTab.style.display="none";autoCompleteTab.parentElement.insertBefore(r,tagSelector);tagCount++}function AddTag(n){let t=n.value.replace(";","");SelectTag(t)}function RemoveTag(n){let t=n.currentTarget.parentElement,i=n.currentTarget.getAttribute("data-tag"),r=document.querySelectorAll("input[value='"+i+"']")[0];t.remove();r.remove()}let forms=document.getElementsByTagName("FORM");if(forms!==undefined&&forms!==null&&forms.length>0)for(let n=0;n<forms.length;n++){let t=forms[n];t.addEventListener("submit",function(n){n.preventDefault();ValidForm(t)},!1)}let closeString='<svg class="svg-inline--fa fa-times-circle fa-w-16" aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"><\/path><\/svg>',closeIcons=document.getElementsByClassName("close");if(closeIcons!==undefined&&closeIcons!==null&&closeIcons.length>0)for(let n=0;n<closeIcons.length;n++){let t=closeIcons[n];t.addEventListener("click",function(n){RemoveTag(n)})}let tagSelector=document.getElementById("TagSelector");tagSelector!==undefined&&tagSelector!==null&&tagSelector.addEventListener("keyup",function(n){AutoComplete(tagSelector.value);n.key===";"&&AddTag(tagSelector)});let autoCompleteTab=document.getElementById("AutoCompleteTab"),tagsBlock=document.getElementById("tags"),postLines=document.getElementsByClassName("Post"),draggedElement,clonedElement;if(postLines!=null&&postLines.length>0)for(let n=0;n<postLines.length;n++){let t=postLines[n];t.addEventListener("drag",function(n){n.preventDefault()});t.addEventListener("dragenter",function(n){DragOver(n)});t.addEventListener("dragover",function(n){DragOver(n)});t.addEventListener("dragleave",function(n){DragLeave(n)});t.addEventListener("dragstart",function(n){DragElement(n)});t.addEventListener("dragend",function(n){DragEnd(n)});t.addEventListener("drop",function(n){Drop(n)})}